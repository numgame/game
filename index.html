<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Number Tracker Game</title>
    <!-- Import Montserrat Font -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        /* General Styles */
        body {
            font-family: 'Montserrat', sans-serif; /* Montserrat Font */
            margin: 0;
            padding: 0;
            background-color: #212327; /* New Background */
            color: #ffffff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }

        .version {
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 14px;
            color: #9C7DFF; /* Soft Lavender */
        }

        /* Header/Title */
        .header {
            font-size: 24px;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 20px;
        }

        /* Container for the game */
        .game-container {
            background-color: #292a2d; /* New Container Background */
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            width: 90%;
            max-width: 600px;
            text-align: center;
            border: 2px solid #4d6bfe; /* Button color outline */
            transition: transform 0.3s ease, width 0.3s ease, padding 0.3s ease;
        }

        .game-container.small {
            width: 80%; /* Smaller width */
            padding: 15px; /* Smaller padding */
        }

        .game-container.smaller {
            width: 70%; /* Smallest width */
            padding: 10px; /* Smallest padding */
        }

        .game-container.small .header {
            font-size: 20px; /* Smaller header font size */
        }

        .game-container.smaller .header {
            font-size: 18px; /* Smallest header font size */
        }

        .game-container.small input[type="text"],
        .game-container.small input[type="password"] {
            font-size: 14px; /* Smaller input font size */
        }

        .game-container.smaller input[type="text"],
        .game-container.smaller input[type="password"] {
            font-size: 12px; /* Smallest input font size */
        }

        .game-container.small button {
            font-size: 14px; /* Smaller button font size */
            padding: 8px 16px; /* Smaller button padding */
        }

        .game-container.smaller button {
            font-size: 12px; /* Smallest button font size */
            padding: 6px 12px; /* Smallest button padding */
        }

        .game-container.small .container span {
            font-size: 14px; /* Smaller number font size */
            padding: 6px; /* Smaller number padding */
            min-width: 30px; /* Smaller min-width */
        }

        .game-container.smaller .container span {
            font-size: 12px; /* Smallest number font size */
            padding: 4px; /* Smallest number padding */
            min-width: 25px; /* Smallest min-width */
        }

        /* Password container */
        .password-container {
            background-color: #292a2d; /* Same as game container */
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            text-align: center;
            border: 2px solid #4d6bfe; /* Button color outline */
        }

        /* Number display container */
        .container {
            display: grid;
            grid-template-columns: repeat(6, 1fr); /* 6 columns */
            grid-template-rows: repeat(6, 1fr); /* 6 rows */
            gap: 5px;
            justify-content: center;
            margin-bottom: 20px;
            background-color: #f4f4f4; /* New Number Container Background */
            padding: 10px;
            border-radius: 5px;
        }

        .container span {
            padding: 10px;
            font-weight: bold;
            font-size: 18px;
            background-color: #ffffff;
            border-radius: 5px;
            min-width: 40px;
            text-align: center;
            color: #000000; /* Black text for numbers */
        }

        /* Input field */
        input[type="text"],
        input[type="password"] {
            width: 80%;
            padding: 10px;
            font-size: 16px;
            border: 2px solid #404045; /* New Text Box Background */
            border-radius: 5px;
            margin-bottom: 10px;
            outline: none;
            transition: border-color 0.3s ease;
            background-color: #404045; /* New Text Box Background */
            color: #ffffff;
            font-family: 'Montserrat', sans-serif; /* Montserrat Font */
        }

        input[type="text"]:focus,
        input[type="password"]:focus {
            border-color: #4d6bfe; /* Button Background */
        }

        /* Buttons */
        button {
            padding: 10px 20px;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            background-color: #4d6bfe; /* Button Background */
            color: #ffffff; /* Button Text Color */
            cursor: pointer;
            margin: 5px;
            transition: background-color 0.3s ease;
            font-family: 'Montserrat', sans-serif; /* Montserrat Font */
        }

        button:hover {
            background-color: #4f6eca; /* Hover Button Background */
        }

        button:active {
            background-color: #3a4fa8; /* Active Button Background */
        }

        /* Voice input buttons */
        .voice-button {
            background-color: #28a745;
        }

        .voice-button:hover {
            background-color: #218838;
        }

        .stop-voice-button {
            background-color: #dc3545;
        }

        .stop-voice-button:hover {
            background-color: #c82333;
        }

        /* Status and messages */
        .voice-status {
            font-size: 14px;
            color: #9C7DFF; /* Soft Lavender */
            margin-top: 10px;
        }

        /* Alert container */
        .alert-container {
            margin-top: 20px;
            background-color: #292a2d; /* Same as game container */
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #4d6bfe; /* Button color outline */
            width: 90%;
            max-width: 500px; /* Smaller than game container */
            text-align: center; /* Center text */
            margin-left: auto;
            margin-right: auto; /* Center the container */
            position: relative; /* For positioning buttons */
            transition: transform 0.3s ease, width 0.3s ease, padding 0.3s ease;
        }

        .alert-container.small {
            width: 70%; /* Smaller width */
            padding: 10px; /* Smaller padding */
        }

        .alert-container.minimized .alert {
            display: none; /* Hide alerts when minimized */
        }

        .alert-container.minimized h3 {
            margin-bottom: 0; /* Reduce margin when minimized */
        }

        .alert-container h3 {
            margin: 0 0 10px 0;
            font-size: 18px;
            color: #ffffff;
            transition: font-size 0.3s ease;
        }

        .alert-container.small h3 {
            font-size: 16px; /* Smaller font size */
        }

        .alert {
            font-size: 16px;
            color: #ffffff;
            margin: 5px 0;
            padding: 10px;
            border-radius: 5px;
            opacity: 0;
            transform: translateY(-20px);
            transition: opacity 0.5s ease, transform 0.5s ease, font-size 0.3s ease, padding 0.3s ease;
        }

        .alert.show {
            opacity: 1;
            transform: translateY(0);
        }

        .alert-container.small .alert {
            font-size: 14px; /* Smaller font size */
            padding: 8px; /* Smaller padding */
        }

        .alert-buttons {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 5px;
        }

        .alert-buttons button {
            background: none;
            border: none;
            color: #ffffff;
            font-size: 16px;
            cursor: pointer;
            padding: 5px;
            transition: color 0.3s ease;
        }

        .alert-buttons button:hover {
            color: #4d6bfe; /* Button hover color */
        }

        .warning {
            font-size: 16px;
            color: #ffc107;
            margin-top: 10px;
        }

        .error-message {
            font-size: 14px;
            color: #dc3545;
            margin-top: 10px;
        }

        /* Small warning text */
        .small-warning {
            font-size: 14px; /* Smaller font size */
            margin: 10px 0; /* Add some margin */
            color: #ffc107; /* Warning color */
        }

        /* Responsive design */
        @media (max-width: 600px) {
            .container span {
                font-size: 16px;
                padding: 8px;
                min-width: 35px;
            }

            input[type="text"],
            input[type="password"] {
                width: 90%;
            }

            button {
                padding: 8px 16px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="version">V1.7</div>
    <div class="password-container">
        <div class="header">Number Game</div>
        <script>
// Version: v1.7
// If updating, increment version number and retain this comment

class NumberTracker {
  constructor() {
    // Define valid numbers for the game (including "00")
    this.validNumbers = new Set([0, "00", 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36]);
    
    // Map numbers to their colors (red, black, green)
    this.colorMap = {
      red: new Set([1, 3, 5, 7, 9, 12, 14, 16, 18, 19, 21, 23, 25, 27, 30, 32, 34, 36]),
      black: new Set([2, 4, 6, 8, 10, 11, 13, 15, 17, 20, 22, 24, 26, 28, 29, 31, 33, 35]),
      green: new Set([0, "00"])
    };
    
    // Load numbers from localStorage or initialize with an empty array
    this.numbers = JSON.parse(localStorage.getItem("numbers")) || [];
    
    // Initialize other properties
    this.undoStack = [];
    this.recognition = null;
    this.alerts = []; // Track active alerts
    this.checkPassword();
  }

  // Check password before allowing access to the game
  checkPassword() {
    const passwordContainer = document.querySelector(".password-container");
    
    const passwordInput = document.createElement("input");
    passwordInput.type = "password";
    passwordInput.placeholder = "Enter password";
    
    const submitButton = document.createElement("button");
    submitButton.textContent = "Submit";
    submitButton.addEventListener("click", () => this.submitPassword(passwordInput));
    
    // Submit password on Enter key
    passwordInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") this.submitPassword(passwordInput);
    });
    
    passwordContainer.append(passwordInput, submitButton);
  }

  // Submit password and initialize the game if correct
  submitPassword(passwordInput) {
    if (passwordInput.value === "paul") {
      document.querySelector(".password-container").style.display = "none"; // Hide password container
      this.createUI();
      this.render();
    } else {
      alert("Incorrect password. Try again.");
    }
  }

  // Create the game UI (input field, buttons, etc.)
  createUI() {
    const gameContainer = document.createElement("div");
    gameContainer.className = "game-container";
    document.body.appendChild(gameContainer);
    
    // Add header
    const header = document.createElement("div");
    header.className = "header";
    header.textContent = "Number Game";
    gameContainer.appendChild(header);
    
    // Create a container for the numbers at the top
    this.numbersContainer = document.createElement("div");
    this.numbersContainer.className = "container";
    
    // Input field for entering numbers
    this.inputField = document.createElement("input");
    this.inputField.type = "text";
    this.inputField.placeholder = "Enter a number";
    this.inputField.inputMode = "tel"; // Use "tel" for numbers + symbols + Enter
    this.inputField.addEventListener("keydown", (e) => this.handleKeydown(e));
    
    // Undo button to remove the last number
    this.undoButton = document.createElement("button");
    this.undoButton.textContent = "Undo";
    this.undoButton.addEventListener("click", () => this.undoLastEntry());
    
    // Enter button to submit the number
    this.enterButton = document.createElement("button");
    this.enterButton.textContent = "Enter";
    this.enterButton.addEventListener("click", () => {
      const input = this.inputField.value.trim();
      if (input) {
        this.processInput(input);
        this.inputField.value = "";
        // Keep the keyboard open on mobile devices
        this.inputField.focus();
      }
    });
    
    // Reset button to clear all numbers
    this.resetButton = document.createElement("button");
    this.resetButton.textContent = "Reset";
    this.resetButton.addEventListener("click", () => this.resetGame());
            
    // Status and messages
    this.voiceStatus = document.createElement("p");
    this.voiceStatus.className = "voice-status";
    
    // Alert container
    this.alertContainer = document.createElement("div");
    this.alertContainer.className = "alert-container";
    this.alertContainer.innerHTML = "<h3>Active Alerts</h3>";
    
    // Alert buttons
    const alertButtons = document.createElement("div");
    alertButtons.className = "alert-buttons";
    
    // Minimize button
    this.minimizeButton = document.createElement("button");
    this.minimizeButton.innerHTML = "&#9660;"; // Down arrow symbol
    this.minimizeButton.addEventListener("click", () => this.toggleMinimize());
    
    // Resize button
    this.resizeButton = document.createElement("button");
    this.resizeButton.innerHTML = "&#9723;"; // Square symbol
    this.resizeButton.addEventListener("click", () => this.toggleResize());
    
    alertButtons.append(this.minimizeButton, this.resizeButton);
    this.alertContainer.appendChild(alertButtons);
    
    this.warningMessage = document.createElement("div");
    this.warningMessage.className = "warning small-warning"; // Add small-warning class
    
    this.errorMessage = document.createElement("p");
    this.errorMessage.className = "error-message";
    
    // Append everything to the game container
    gameContainer.append(this.numbersContainer, this.warningMessage, this.inputField, this.undoButton, this.enterButton, this.resetButton, this.voiceButton, this.stopVoiceButton, this.voiceStatus, this.alertContainer, this.errorMessage);

    // Add "Smaller" button for the game container
    const smallerButton = document.createElement("button");
    smallerButton.textContent = "Smaller";
    smallerButton.addEventListener("click", () => this.toggleGameContainerSize());
    document.body.insertBefore(smallerButton, gameContainer);
  }

  // Toggle game container size
  toggleGameContainerSize() {
    const gameContainer = document.querySelector(".game-container");
    if (!gameContainer.classList.contains("small") && !gameContainer.classList.contains("smaller")) {
      gameContainer.classList.add("small");
    } else if (gameContainer.classList.contains("small")) {
      gameContainer.classList.remove("small");
      gameContainer.classList.add("smaller");
    } else if (gameContainer.classList.contains("smaller")) {
      gameContainer.classList.remove("smaller");
    }
  }

  // Toggle minimize alerts
  toggleMinimize() {
    this.alertContainer.classList.toggle("minimized");
    if (this.alertContainer.classList.contains("minimized")) {
      this.minimizeButton.innerHTML = "&#9658;"; // Right arrow symbol
    } else {
      this.minimizeButton.innerHTML = "&#9660;"; // Down arrow symbol
    }
  }

  // Toggle resize alerts
  toggleResize() {
    this.alertContainer.classList.toggle("small");
  }

  // Handle Enter key press in the input field
  handleKeydown(e) {
    if (e.key === "Enter") {
      const input = this.inputField.value.trim();
      if (input) {
        this.processInput(input);
        this.inputField.value = "";
        // Keep the keyboard open on mobile devices
        this.inputField.focus();
      }
    }
  }

  // Process the input number
  processInput(input) {
    // Handle "00" as a valid input
    const number = input === "00" ? "00" : parseInt(input, 10);
    
    // Validate the input
    if ((isNaN(number) && input !== "00") || !this.validNumbers.has(number)) {
      this.errorMessage.textContent = `Invalid number: ${input}. Please enter a valid number.`;
      return;
    }

    // Clear error message if input is valid
    this.errorMessage.textContent = "";

    // Ensure a maximum of 36 numbers
    if (this.numbers.length >= 36) {
      this.numbers.shift(); // Remove the first number
    }

    // Add the new number
    this.numbers.push(number);

    // Save to localStorage
    localStorage.setItem("numbers", JSON.stringify(this.numbers));

    // Render the updated list
    this.render();

    // Check for triplets and warnings
    this.checkForTriplets();
    this.checkForWarnings();
  }

  // Reset the game
  resetGame() {
    this.numbers = [];
    localStorage.setItem("numbers", JSON.stringify(this.numbers));
    this.render();
    this.alerts = [];
    this.alertContainer.innerHTML = "<h3>Active Alerts</h3>";
    this.warningMessage.textContent = "";
    this.errorMessage.textContent = "";
  }

  // Convert spoken words to numbers
  convertSpokenTextToNumber(spokenText) {
    const numberWords = {
      "zero": 0,
      "single zero": 0,
      "double zero": "00",
      "one": 1,
      "two": 2,
      "three": 3,
      "four": 4,
      "five": 5,
      "six": 6,
      "seven": 7,
      "eight": 8,
      "nine": 9,
      "ten": 10,
      "eleven": 11,
      "twelve": 12,
      "thirteen": 13,
      "fourteen": 14,
      "fifteen": 15,
      "sixteen": 16,
      "seventeen": 17,
      "eighteen": 18,
      "nineteen": 19,
      "twenty": 20,
      "thirty": 30,
      "thirty-six": 36
    };

    // Convert spoken text to lowercase for matching
    spokenText = spokenText.toLowerCase();

    // Check if the spoken text matches a number word
    if (numberWords.hasOwnProperty(spokenText)) {
      return numberWords[spokenText];
    }

    // Handle cases like "twenty one" (e.g., "twenty-one")
    if (spokenText.includes(" ")) {
      const parts = spokenText.split(" ");
      if (parts.length === 2 && numberWords.hasOwnProperty(parts[0]) && numberWords.hasOwnProperty(parts[1])) {
        return numberWords[parts[0]] + numberWords[parts[1]];
      }
    }

    return null; // Return null if no match is found
  }

  // Check for triplets and display alerts
  checkForTriplets() {
    const countMap = {};
    const newAlerts = new Set();
    
    // Count occurrences of each number
    for (const num of this.numbers) {
      countMap[num] = (countMap[num] || 0) + 1;
      if (countMap[num] === 3) {
        newAlerts.add(num); // Add to active alerts
      }
    }
    
    // Update alerts (newest at the top)
    const previousAlerts = new Set(this.alerts);
    this.alerts = [...newAlerts].reverse();
    
    // Clear the existing alerts but keep the buttons
    this.alertContainer.innerHTML = "<h3>Active Alerts</h3>";
    
    // Re-add the buttons
    const alertButtons = document.createElement("div");
    alertButtons.className = "alert-buttons";
    
    // Minimize button
    this.minimizeButton = document.createElement("button");
    this.minimizeButton.innerHTML = "&#9660;"; // Down arrow symbol
    this.minimizeButton.addEventListener("click", () => this.toggleMinimize());
    
    // Resize button
    this.resizeButton = document.createElement("button");
    this.resizeButton.innerHTML = "&#9723;"; // Square symbol
    this.resizeButton.addEventListener("click", () => this.toggleResize());
    
    alertButtons.append(this.minimizeButton, this.resizeButton);
    this.alertContainer.appendChild(alertButtons);
    
    // Display active alerts
    this.alerts.forEach((num, index) => {
      const alert = document.createElement("div");
      alert.className = "alert";
      
      // Set background color based on number color
      if (this.colorMap.red.has(num)) {
        alert.style.backgroundColor = "#cc2020"; // Red
      } else if (this.colorMap.green.has(num)) {
        alert.style.backgroundColor = "#23913c"; // Green
      } else if (this.colorMap.black.has(num)) {
        alert.style.backgroundColor = "#1e1f22"; // Black
      }
      
      alert.textContent = `Number ${num} appeared three times!`;
      this.alertContainer.appendChild(alert);
      
      // Only animate if it's a new alert
      if (!previousAlerts.has(num)) {
        setTimeout(() => alert.classList.add("show"), 10); // Trigger slide-up animation
      } else {
        alert.classList.add("show"); // Show without animation
      }
    });
  }

  // Check for warnings when a triplet is about to disappear
  checkForWarnings() {
    const firstNumber = this.numbers[0];
    if (firstNumber !== undefined) {
      const count = this.numbers.filter((n) => n === firstNumber).length;
      if (count === 3) {
        this.warningMessage.textContent = `Warning: Number ${firstNumber} (appears 3 times) is about to disappear!`;
      } else {
        this.warningMessage.textContent = "";
      }
    }
  }

  // Render the list of numbers
  render() {
    // Clear the existing numbers container
    this.numbersContainer.innerHTML = "";
    
    // Render the numbers (up to 36)
    const numbersToDisplay = this.numbers.slice(-36);
    for (let i = 0; i < 36; i++) {
      const span = document.createElement("span");
      span.textContent = numbersToDisplay[i] === 0 ? "0" : numbersToDisplay[i] || ""; // Display "0" for 0, blank for null/undefined
      
      if (this.colorMap.red.has(numbersToDisplay[i])) span.style.color = "red";
      else if (this.colorMap.black.has(numbersToDisplay[i])) span.style.color = "black";
      else if (this.colorMap.green.has(numbersToDisplay[i])) span.style.color = "green";
      
      this.numbersContainer.appendChild(span);
    }
  }

  // Initialize voice recognition
  initVoiceRecognition() {
    if (!('webkitSpeechRecognition' in window || 'SpeechRecognition' in window)) {
      this.errorMessage.textContent = "Voice recognition is not supported in this browser.";
      return;
    }
    
    this.recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    this.recognition.lang = "en-US";
    this.recognition.continuous = true; // Keep listening until stopped
    this.recognition.interimResults = false;
    
    this.recognition.onstart = () => {
      this.voiceStatus.textContent = "Listening...";
      this.voiceButton.style.display = "none";
      this.stopVoiceButton.style.display = "inline";
    };
    
    this.recognition.onresult = (event) => {
      let spokenText = event.results[event.results.length - 1][0].transcript.trim();
      const number = this.convertSpokenTextToNumber(spokenText);
      
      if (number !== null) {
        this.inputField.value = number;
        this.processInput(number.toString());
      } else {
        this.errorMessage.textContent = `Could not recognize number: ${spokenText}. Try again.`;
      }
    };
    
    this.recognition.onerror = () => {
      this.errorMessage.textContent = "Could not recognize speech. Try again.";
    };
    
    this.recognition.onend = () => {
      this.voiceButton.style.display = "inline";
      this.stopVoiceButton.style.display = "none";
    };
    
    this.recognition.start();
  }

  // Stop voice recognition
  stopVoiceRecognition() {
    if (this.recognition) {
      this.recognition.stop();
      this.voiceStatus.textContent = "Voice input stopped.";
    }
  }

  // Undo the last entry
  undoLastEntry() {
    if (this.numbers.length > 0) {
      this.numbers.pop(); // Remove the last number
      localStorage.setItem("numbers", JSON.stringify(this.numbers));
      this.render();
    }
  }
}

new NumberTracker();
        </script>
    </div>
</body>
</html>
